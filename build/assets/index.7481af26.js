import{j as f,a as m,r as c,R as I,b as k}from"./vendor.a7bcea1a.js";const M=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function o(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(t){if(t.ep)return;t.ep=!0;const s=o(t);fetch(t.href,s)}};M();const r=f.exports.jsx,u=f.exports.jsxs,y=f.exports.Fragment,g=({handler:e,value:n,name:o})=>u("div",{children:[u("label",{htmlFor:o,children:[o,": "]}),r("input",{name:o,onChange:e,value:n})]}),h="http://localhost:3001",O=()=>m.get(`${h}/api/persons`).then(e=>{const{data:n}=e;return n}),A=e=>m.post(`${h}/api/persons`,e),R=e=>m.delete(`${h}/api/persons/${e}`),D=(e,n)=>m.put(`${h}/api/persons/${e}`,n).then(o=>{const{data:l}=o;return l}),E=({data:e,message:n})=>{const[o,l]=c.exports.useState(!1),t=()=>{window.confirm(`Delete ${e.name}`)&&(R(e.id).catch(()=>n(`Information of ${e.name} was already removed from server`)),l(!0))};return o?r(y,{}):u("li",{children:[u("span",{children:[e.name," ",e.number," "]}),r("button",{onClick:t,children:"delete"})]})},q=({list:e,message:n})=>r("ul",{children:e.map(o=>r(E,{data:o,message:n},o.name))}),B=({detail:e})=>e===null?null:r("div",{className:"ok",children:e}),H=()=>{const[e,n]=c.exports.useState([]),[o,l]=c.exports.useState(""),[t,s]=c.exports.useState(""),[d,N]=c.exports.useState(""),[P,b]=c.exports.useState(null);c.exports.useEffect(()=>{O().then(a=>n(a)).catch(console.log)},[]);const $=a=>{N(a.target.value)},L=a=>{l(a.target.value)},S=a=>{s(a.target.value)},C=a=>{a.preventDefault();const i={name:o,number:t,id:e.length+1},w=e.filter(v=>v.name.toLowerCase()===i.name.toLowerCase());w.length===0?A(i).then(n([...e,i])).then(()=>p(`Added ${i.name}`)).catch(console.log):confirm(`${i.name} is already added to phonebook, replace the old number with a new one?`)&&D(w[0].id,i).then(v=>{n(e.map(x=>x.name.toLowerCase()===i.name.toLowerCase()?i:x))}).then(p(`Updated Information of  ${i.name}`)).catch(console.log),l(""),s("")},p=a=>{b(a),setTimeout(()=>b(null),5e3)},F=new RegExp(d,"gi"),j=e.filter(a=>F.test(a.name));return u(y,{children:[u("form",{children:[r("h1",{children:"Phonebook"}),r(B,{detail:P}),r(g,{handler:$,value:d,name:"filter"}),r("h3",{children:"Add a new Phone"}),r(g,{handler:L,value:o,name:"name"}),r(g,{handler:S,value:t,name:"number"}),r("button",{type:"submit",onClick:C,children:"Add Number"})]}),r("h2",{children:"Numbers"}),r(q,{list:j,message:p})]})};I.render(r(k.StrictMode,{children:r(H,{})}),document.getElementById("root"));
